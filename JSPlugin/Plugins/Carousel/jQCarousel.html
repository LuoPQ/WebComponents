<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style>
        div, ul, li { padding: 0; margin: 0; }
        #scrollPics { height: 150px; width: 500px; margin-bottom: 10px; overflow: hidden; position: relative; }
            #scrollPics .slider li { float: left; }
            #scrollPics .slider { position: absolute; width: 2500px; }
        .num { position: absolute; right: 5px; bottom: 5px; }
        #scrollPics .num li { float: left; color: #FF7300; text-align: center; line-height: 16px; width: 16px; height: 16px; cursor: pointer; overflow: hidden; margin: 3px 1px; border: 1px solid #FF7300; background-color: #fff; }
            #scrollPics .num li.on { color: #fff; line-height: 21px; width: 21px; height: 21px; font-size: 16px; margin: 0 1px; border: 0; background-color: #FF7300; font-weight: bold; }
    </style>
</head>
<body>
    <div id="scrollPics">
        <ul class="slider">
            <li><img src="http://i2.hdslb.com/u_user/3953b15495ef95c564319baa04f5c475.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/f0b7b83968f73d067e9512672db65a1b.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/40febc7c978ae71e646a9a23036ca68c.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/b2ea9be2edeb6e73adbb03b367f5534e.jpg" /></li>
        </ul>
        <ul class="num">
            <li class="on">1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
    </div>
    <script src="../../Scripts/jquery-2.1.3.min.js"></script>
    <script>
        //滚动广告
        var len = $(".num > li").length;
        var index = 0;  //图片序号
        var adTimer;
        $(".num li").mouseover(function () {
            index = $(".num li").index(this);  //获取鼠标悬浮 li 的index
            showImg(index);
        }).eq(0).mouseover();
        //滑入停止动画，滑出开始动画.
        $('#scrollPics').hover(function () {
            clearInterval(adTimer);
        }, function () {
            adTimer = setInterval(function () {
                showImg(index)
                index++;
                if (index == len) {       //最后一张图片之后，转到第一张
                    index = 0;
                }
            }, 3000);
        }).trigger("mouseleave");

        var adHeight = $("#scrollPics>ul>li:first").width();

        $(".slider").css({
            "left": -adHeight * index + "px"    //改变 marginTop 属性的值达到轮播的效果
        });

        function showImg(index) {
            var adHeight = $("#scrollPics>ul>li:first").width();
            if ((adHeight * 3 - adHeight * index) < 500) {
                var left = -adHeight * 4 + 500;
            }
            $(".slider").stop(true, false).animate({
                "left": ((adHeight * 3 - adHeight * index) < 500 ? left : (-adHeight * index)) + "px"    //改变 marginTop 属性的值达到轮播的效果
            }, 1000);
            $(".num li").removeClass("on")
                .eq(index).addClass("on");
        }
    </script>


    <style>
        .imageRotation { height: 270px; width: 570px; overflow: hidden; /*--超出容器的所有元素都不可见--*/ position: relative; /*--相对定位--*/ border: 10px solid #eee; bodrer-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; }
        /*-------------图片容器---------------*/
        .imageBox { position: absolute; /*--固定定位--*/ height: 270px; top: 0; left: 0; overflow: hidden; }
            .imageBox img { display: block; height: 270px; width: 570px; float: left; border: none; }
        /*-------------标题容器---------------*/
        .titleBox { position: absolute; /*--固定定位--*/ bottom: 0; width: 570px; height: 40px; overflow: hidden; }
            .titleBox p { position: absolute; /*--固定定位--*/ bottom: -40px; width: 550px; height: 40px; margin: 0; padding: 0 10px; line-height: 40px; z-index: 1; background-color: #000; color: #fff; font-family: "微软雅黑","yahei"; opacity: 0.5; -moz-opacity: 0.5; -webkit-opacity: 0.5; filter: alpha(opacity=50); }
                .titleBox p span { opacity: 1; -moz-opacity: 1; -webkit-opacity: 1; filter: alpha(opacity=100); }
                .titleBox p.active { bottom: 0; }
        /*-------------图标容器---------------*/
        .icoBox { position: absolute; /*--固定定位--*/ bottom: 14px; right: 15px; width: 76px; height: 12px; text-align: center; line-height: 40px; z-index: 2; }
            .icoBox span { display: block; float: left; height: 12px; width: 12px; margin-left: 3px; overflow: hidden; background: url("http://www.itxueyuan.org/uploads/javascript/demo/lunbo/zuoyou_title/images/ico.png") 0 0 no-repeat; cursor: pointer; }
                .icoBox span.active { background-position: 0 -12px; cursor: default; }
    </style>
    <div class="imageRotation">
        <div class="imageBox">
            <a href="http://www.itxueyuan.org" target="_blank"><img src="http://www.itxueyuan.org/uploads/javascript/demo/lunbo/zuoyou_title/images/1.jpg" /></a>
            <a href="http://www.itxueyuan.org" target="_blank"><img src="http://www.itxueyuan.org/uploads/javascript/demo/lunbo/zuoyou_title/images/2.jpg" /></a>
            <a href="http://www.itxueyuan.org" target="_blank"><img src="http://www.itxueyuan.org/uploads/javascript/demo/lunbo/zuoyou_title/images/3.jpg" /></a>
            <a href="http://www.itxueyuan.org" target="_blank"><img src="http://www.itxueyuan.org/uploads/javascript/demo/lunbo/zuoyou_title/images/4.jpg" /></a>
            <a href="http://www.itxueyuan.org" target="_blank"><img src="http://www.itxueyuan.org/uploads/javascript/demo/lunbo/zuoyou_title/images/5.jpg" /></a>
        </div>
        <div class="titleBox">
            <p class="active"><span>第一张图片标题</span></p>
            <p>第二张图片标题</p>
            <p>第三张图片标</p>
            <p>第四张图片标题</p>
            <p>第五张图片标题</p>
        </div>
        <div class="icoBox">
            <span class="active" rel="1">1</span>
            <span rel="2">2</span>
            <span rel="3">3</span>
            <span rel="4">4</span>
            <span rel="5">5</span>
        </div>
    </div>
    <script>
        //$(document).ready(function () {
        //    $(".imageRotation").each(function () {
        //        // 获取有关参数
        //        var imageRotation = this,  // 图片轮换容器
        //            imageBox = $(imageRotation).children(".imageBox")[0],  // 图片容器
        //            titleBox = $(imageRotation).children(".titleBox")[0],  // 标题容器
        //            titleArr = $(titleBox).children(),  // 所有标题（数组）
        //            icoBox = $(imageRotation).children(".icoBox")[0],  // 图标容器
        //            icoArr = $(icoBox).children(),  // 所有图标（数组）
        //            imageWidth = $(imageRotation).width(),  // 图片宽度
        //            imageNum = $(imageBox).children().size(),  // 图片数量
        //            imageReelWidth = imageWidth * imageNum,  // 图片容器宽度
        //            activeID = parseInt($($(icoBox).children(".active")[0]).attr("rel")),  // 当前图片ID
        //            nextID = 0,  // 下张图片ID
        //            setIntervalID,  // setInterval() 函数ID
        //            intervalTime = 4000,  // 间隔时间
        //            imageSpeed = 500,  // 图片动画执行速度
        //            titleSpeed = 250;  // 标题动画执行速度
        //        // 设置 图片容器 的宽度
        //        $(imageBox).css({ 'width': imageReelWidth + "px" });
        //        // 图片轮换函数
        //        var rotate = function (clickID) {
        //            if (clickID) { nextID = clickID; }
        //            else { nextID = activeID <= 3 ? activeID + 1 : 1; }
        //            // 交换图标
        //            $(icoArr[activeID - 1]).removeClass("active");
        //            $(icoArr[nextID - 1]).addClass("active");
        //            // 交换标题
        //            $(titleArr[activeID - 1]).animate(
        //                { bottom: "-40px" },
        //                titleSpeed,
        //                function () {
        //                    $(titleArr[nextID - 1]).animate({ bottom: "0px" }, titleSpeed);
        //                }
        //            );
        //            // 交换图片
        //            $(imageBox).animate({ left: "-" + (nextID - 1) * imageWidth + "px" }, imageSpeed);
        //            // 交换IP
        //            activeID = nextID;
        //        }
        //        setIntervalID = setInterval(rotate, intervalTime);
        //        $(imageBox).hover(
        //            function () { clearInterval(setIntervalID); },
        //            function () { setIntervalID = setInterval(rotate, intervalTime); }
        //        );
        //        $(icoArr).click(function () {
        //            clearInterval(setIntervalID);
        //            var clickID = parseInt($(this).attr("rel"));
        //            rotate(clickID);
        //            setIntervalID = setInterval(rotate, intervalTime);
        //        });
        //    });
        //});
    </script>
</body>
</html>
