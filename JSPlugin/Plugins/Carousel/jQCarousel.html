<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style>
        div, ul, li { padding: 0; margin: 0; }
        .container { height: 220px; width: 1000px; margin-bottom: 10px; }
            .container .slider li { float: left; }
        /*.container .slider { position: absolute; width: 2500px; }*/
        .num { position: absolute; right: 5px; bottom: 5px; }
        .container .num li { float: left; color: #FF7300; text-align: center; line-height: 16px; width: 16px; height: 16px; cursor: pointer; overflow: hidden; margin: 3px 1px; border: 1px solid #FF7300; background-color: #fff; }
            .container .num li.on { color: #fff; line-height: 21px; width: 21px; height: 21px; font-size: 16px; margin: 0 1px; border: 0; background-color: #FF7300; font-weight: bold; }
    </style>
</head>
<body>

    <!--<div class="container">
        <div class="slider">
            <a href="javascript:;"><img src="http://i2.hdslb.com/u_user/3953b15495ef95c564319baa04f5c475.jpg" /></a>
        </div>
    </div>-->



    <div class="container">
        <ul class="slider">
            <li><img src="http://i2.hdslb.com/u_user/3953b15495ef95c564319baa04f5c475.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/f0b7b83968f73d067e9512672db65a1b.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/40febc7c978ae71e646a9a23036ca68c.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/b2ea9be2edeb6e73adbb03b367f5534e.jpg" /></li>
            <li><img src="http://i2.hdslb.com/u_user/3953b15495ef95c564319baa04f5c475.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/f0b7b83968f73d067e9512672db65a1b.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/40febc7c978ae71e646a9a23036ca68c.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/b2ea9be2edeb6e73adbb03b367f5534e.jpg" /></li>
            <li><img src="http://i2.hdslb.com/u_user/3953b15495ef95c564319baa04f5c475.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/f0b7b83968f73d067e9512672db65a1b.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/40febc7c978ae71e646a9a23036ca68c.jpg" /></li>
            <li><img src="http://i1.hdslb.com/u_user/b2ea9be2edeb6e73adbb03b367f5534e.jpg" /></li>
        </ul>
        <ul class="num">
            <li class="on">1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
    </div>
    <input type="button" value="向左" id="scrollLeft" />
    <input type="button" value="向右" id="scrollRight" />

    <script src="../../Scripts/jquery-2.1.3.min.js"></script>
    <script src="jquery.slide.js"></script>
    <script>

        //$(".container").slide({
        //    imgPaths: [
        //        "http://i2.hdslb.com/u_user/3953b15495ef95c564319baa04f5c475.jpg",
        //        "http://i1.hdslb.com/u_user/f0b7b83968f73d067e9512672db65a1b.jpg",
        //        "http://i1.hdslb.com/u_user/40febc7c978ae71e646a9a23036ca68c.jpg",
        //        "http://i1.hdslb.com/u_user/b2ea9be2edeb6e73adbb03b367f5534e.jpg"
        //    ]
        //});


        var $container = $(".container");

        //保证容器设置为下面的样式
        $container.css({
            "position": "relative",
            "overflow": "hidden"
        })

        var containerWidth = $container.width();

        //获取slider里面子元素也就是图片数量
        var len = $(".slider").children().length;

        //计时器
        var adTimer = null;
        var index = 0;  //图片序号

        //滚动广告
        //var len = $(".num > li").length;
        //var index = 0;  //图片序号
        //var adTimer;

        //$(".num li").mouseover(function () {
        //    index = $(".num li").index(this);  //获取鼠标悬浮 li 的index
        //    showImg(index);
        //}).eq(0).mouseover();

        //滑入停止动画，滑出开始动画.
        $container.hover(function () {
            clearInterval(adTimer);
        }, function () {
            adTimer = setInterval(function () {
                showImg(index)
                index++;
                if (index == len) {       //最后一张图片之后，转到第一张
                    index = 0;
                }
            }, 3000);
        }).trigger("mouseleave");

        //横向滚动的距离等于元素的宽度
        var scrollWidth = $(".slider li:first").width();

        $(".slider").css({
            "left": -scrollWidth * index + "px",   //改变 marginTop 属性的值达到轮播的效果
            "width": scrollWidth * len + "px",//设置整个slide宽度为所有子元素的总宽度
            "position": "absolute"//保证Slide的position为absolute，必须脱离文档流才能滚动
        });

        //进行滚动
        function showImg(index) {

            //滚动的长度
            var scrollLength = scrollWidth * index;

            //滚动的最大长度
            var maxScrollLength = scrollWidth * (len - 1);

            if ((maxScrollLength - scrollLength) < containerWidth) {
                var left = containerWidth - scrollWidth * len;
            }

            $(".slider").stop(true, false).animate({
                "left": ((maxScrollLength - scrollLength) < containerWidth ? left : (-scrollWidth * index)) + "px"    //改变 marginTop 属性的值达到轮播的效果
            }, 1000);

            //$(".num li").removeClass("on")
            //    .eq(index).addClass("on");
        }

        $("#scrollLeft").on("click", function () {
            if (index > 0) {
                --index
            }
            else {
                index = len;
            }
            clearInterval(adTimer);
            showImg(index);
            adTimer = setInterval(function () {
                showImg(index)
                index++;
                if (index == len) {       //最后一张图片之后，转到第一张
                    index = 0;
                }
            }, 3000);
        })

        $("#scrollRight").on("click", function () {
            if (index < len) {
                ++index;
            }
            else {
                index = 0;
            }
            clearInterval(adTimer);
            showImg(index);
            adTimer = setInterval(function () {
                showImg(index)
                index++;
                if (index == len) {       //最后一张图片之后，转到第一张
                    index = 0;
                }
            }, 3000);

        })
    </script>
</body>
</html>
